<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MySql基础/06.MySQL数据库-多表查询和子查询"><meta name="keywords" content=""><meta name="author" content="DuanChaojie,undefined"><meta name="copyright" content="DuanChaojie"><title>MySql基础/06.MySQL数据库-多表查询和子查询【it❤ld】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/images/itbui.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  gitment: ,
  valine: ,
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="it❤ld" type="application/atom+xml">
</head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL数据库-多表查询和子查询"><span class="toc-text">MySQL数据库-多表查询和子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-多表查询"><span class="toc-text">1. 多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-多表查询分类"><span class="toc-text">1.1 多表查询分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-笛卡尔积现象"><span class="toc-text">1.2 笛卡尔积现象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-什么是笛卡尔积现象"><span class="toc-text">1.2.1 什么是笛卡尔积现象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-清除笛卡尔积现象的影响"><span class="toc-text">1.2.2 清除笛卡尔积现象的影响</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-内连接"><span class="toc-text">1.3 内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-显式内连接"><span class="toc-text">1.3.1 显式内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-隐式内连接"><span class="toc-text">1.3.2 隐式内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-内连接总结"><span class="toc-text">1.3.3 内连接总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-外连接"><span class="toc-text">1.4 外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1-左外连接"><span class="toc-text">1.4.1 左外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-右外连接"><span class="toc-text">1.4.2 右外连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-子查询"><span class="toc-text">2. 子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-子查询结果的三种情况"><span class="toc-text">2.1 子查询结果的三种情况</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-子查询的结果是单行单列"><span class="toc-text">2.1.1 子查询的结果是单行单列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-子查询的结果是多行单列"><span class="toc-text">2.1.2 子查询的结果是多行单列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-子查询的结果是多行多列"><span class="toc-text">2.1.3 子查询的结果是多行多列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-子查询总结"><span class="toc-text">2.1.4 子查询总结</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/images/qad.jpg"></div><div class="author-info-name">DuanChaojie</div><div class="author-info-description">DuanChaojie的个人博客</div><div class="links-buttons"><a class="links-button button-hover" href="https://www.itbuild.cn" target="_blank">QQ: 1585636331<i class="icon-dot bg-color4"></i></a><a class="links-button button-hover" href="https://www.itbuild.cn" target="_blank">手机：17351015389<i class="icon-dot bg-color5"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">星星</span><span class="pull-bottom">122</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">11</span></a></div><div class="friend-link"><a class="friend-link-text" href="http://www.cyc2018.xyz/" target="_blank">算法训练</a><a class="friend-link-text" href="https://www.bilibili.com/" target="_blank">相约B站</a><a class="friend-link-text" href="https://account.aliyun.com/" target="_blank">图床地址</a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="title-name" href="/">it❤ld</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">MySql基础/06.MySQL数据库-多表查询和子查询</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2020-12-19 | 更新于 2020-12-19</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/MySql%E5%9F%BA%E7%A1%80/">MySql基础</a></div><div class="button-hover tags"></div></div></div><div class="main-content"><p>渐写到别来，此情深处，红笺为无色。</p>
<p align="right">——晏几道《思远人》</p>
<a id="more"></a>





<h1 id="MySQL数据库-多表查询和子查询"><a href="#MySQL数据库-多表查询和子查询" class="headerlink" title="MySQL数据库-多表查询和子查询"></a>MySQL数据库-多表查询和子查询</h1><h2 id="1-多表查询"><a href="#1-多表查询" class="headerlink" title="1. 多表查询"></a>1. 多表查询</h2><blockquote>
<p>数据库在单个表里操作其实很简单，但是涉及在多张表里寻找数据的时候，难度会大大增加，这里解释一些多表联合查询常用的操作。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"><span class="comment">-- 插入部门表信息</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (<span class="keyword">name</span>) <span class="keyword">values</span> (<span class="string">'开发部'</span>),(<span class="string">'市场部'</span>),(<span class="string">'财务部'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    gender <span class="built_in">char</span>(<span class="number">1</span>),	<span class="comment">-- 性别</span></span><br><span class="line">    salary <span class="keyword">double</span>,	<span class="comment">-- 工资</span></span><br><span class="line">    join_date <span class="built_in">date</span>,	<span class="comment">-- 入职日期</span></span><br><span class="line">    dept_id <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (dept_id) <span class="keyword">references</span> dept(<span class="keyword">id</span>) </span><br><span class="line">    <span class="comment">-- 外键，关联部门表(部门表的主键)</span></span><br><span class="line">）;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">name</span>,gender,salary,join_date,dept_id) <span class="keyword">values</span>(<span class="string">'孙悟空'</span>,<span class="string">'男'</span>,<span class="number">7200</span>,<span class="string">'2013-02-24'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">name</span>,gender,salary,join_date,dept_id) <span class="keyword">values</span>(<span class="string">'猪八戒'</span>,<span class="string">'男'</span>,<span class="number">3600</span>,<span class="string">'2010-12-02'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">name</span>,gender,salary,join_date,dept_id) <span class="keyword">values</span>(<span class="string">'唐僧'</span>,<span class="string">'男'</span>,<span class="number">9000</span>,<span class="string">'2008-08-08'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">name</span>,gender,salary,join_date,dept_id) <span class="keyword">values</span>(<span class="string">'白骨精'</span>,<span class="string">'女 '</span>,<span class="number">5000</span>,<span class="string">'2015-10-07'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">name</span>,gender,salary,join_date,dept_id) <span class="keyword">values</span>(<span class="string">'蜘蛛精'</span>,<span class="string">'女 '</span>,<span class="number">4500</span>,<span class="string">'2011-03-14'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>多表查询：我们想查询孙悟空的名字和他所在的部门的名字，则需要使用多表查询。</p>
<p>如果一条 SQL 语句查询多张表，因为查询结果在多张不同的表中。每张表取 1 列或多列。</p>
</blockquote>
<h3 id="1-1-多表查询分类"><a href="#1-1-多表查询分类" class="headerlink" title="1.1 多表查询分类"></a>1.1 多表查询分类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">多表查询--&gt;内连接;</span><br><span class="line">多表查询--&gt;外连接;</span><br><span class="line">内连接--&gt;显示内连接;</span><br><span class="line">内连接--&gt;隐式内连接;</span><br><span class="line">外连接--&gt;左外连接;</span><br><span class="line">外连接--&gt;右外连接;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-笛卡尔积现象"><a href="#1-2-笛卡尔积现象" class="headerlink" title="1.2 笛卡尔积现象"></a>1.2 笛卡尔积现象</h3><h4 id="1-2-1-什么是笛卡尔积现象"><a href="#1-2-1-什么是笛卡尔积现象" class="headerlink" title="1.2.1 什么是笛卡尔积现象"></a>1.2.1 什么是笛卡尔积现象</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--	需求：查询所有的员工和所有的部门 </span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept;</span><br></pre></td></tr></table></figure>

<p><strong>结果分析</strong></p>
<p><img src="C:%5CUsers%5CAdministrator%5CDesktop%5C%E7%AC%94%E8%AE%B0%5CjavaWEB%5C%E7%AC%94%E8%AE%B0%5Cassets%5C1565542933299.png" alt=""></p>
<h4 id="1-2-2-清除笛卡尔积现象的影响"><a href="#1-2-2-清除笛卡尔积现象的影响" class="headerlink" title="1.2.2 清除笛卡尔积现象的影响"></a>1.2.2 清除笛卡尔积现象的影响</h4><blockquote>
<p>我们发现不是所有的数据组合都是有用的，只有<strong>员工表.dept_id</strong> = <strong>部门表.id</strong> 的数据才是有用的。所以需要<strong>通过条件过滤掉没用</strong>的数据。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置过滤条件 Column 'id' in where clause is ambiguous select * from emp,dept where id=5;</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.dept_id = dept.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询员工和部门的名字</span></span><br><span class="line"><span class="keyword">select</span> emp.name, dept.name <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.dept_id = dept.id;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-内连接"><a href="#1-3-内连接" class="headerlink" title="1.3 内连接"></a>1.3 内连接</h3><blockquote>
<p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。如：从表.外键=主表.主键</p>
</blockquote>
<h4 id="1-3-1-显式内连接"><a href="#1-3-1-显式内连接" class="headerlink" title="1.3.1 显式内连接"></a>1.3.1 显式内连接</h4><blockquote>
<p>使用 inner join… on语句, 可以省略 inner</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 左表 [<span class="keyword">inner</span>] <span class="keyword">join</span> 右表 <span class="keyword">on</span> 条件;</span><br></pre></td></tr></table></figure>



<h4 id="1-3-2-隐式内连接"><a href="#1-3-2-隐式内连接" class="headerlink" title="1.3.2 隐式内连接"></a>1.3.2 隐式内连接</h4><blockquote>
<p>看不到 join关键字，条件使用 where指定</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 左表,右表 <span class="keyword">where</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 演示</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.dept_id = dept.id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个dept表，设置id字段为主键，并且设置主键自增</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向dept表插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'开发部'</span>),(<span class="literal">null</span>,<span class="string">'市场部'</span>),(<span class="literal">null</span>,<span class="string">'财务部'</span>),(<span class="literal">null</span>,<span class="string">'销售部'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建emp1表，设置id字段为主键,并且设置主键自增</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp1(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    join_date datetime,</span><br><span class="line">    dept_id <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向emp1表插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp1 <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'孙悟空'</span>,<span class="string">'男'</span>,<span class="number">888.8</span>,<span class="literal">null</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp1 <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'唐僧'</span>,<span class="string">'男'</span>,<span class="number">888.8</span>,<span class="literal">null</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp1 <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'八戒'</span>,<span class="string">'男'</span>,<span class="number">888.8</span>,<span class="literal">null</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	查询唐僧的信息，显示员工 id，姓名，性别，工资和所在的部门名称.</span></span><br><span class="line"><span class="comment">	我们发现需要联合 2 张表同时才能查询出需要的数据，</span></span><br><span class="line"><span class="comment">	使用内连接  inner join on </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1 <span class="keyword">inner</span> <span class="keyword">join</span> dept; <span class="comment">-- 这个查到12条记录</span></span><br><span class="line"><span class="comment">-- 确定表连接的条件，即  员工表.dept_id = 部门表.id 的数据才是我们向查到的</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1 e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id = d.id; <span class="comment">-- 这个查到三条数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 确定查询条件，我们查询的是唐僧的信息，  员工表.name='唐僧'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1 e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id = d.id <span class="keyword">where</span> e.name=<span class="string">'唐僧 '</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 确定查询字段，查询唐僧的信息，显示员工 id，姓名，性别，工资和所在的部门名称</span></span><br><span class="line"><span class="keyword">select</span> e.id,e.name,e.gender,e.salary,d.name <span class="keyword">from</span> emp1 e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id = d.id <span class="keyword">where</span> e.name=<span class="string">'唐僧'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 我们发现写表名有点长，可以给表取别名，显示的字段名也使用别名</span></span><br><span class="line"><span class="keyword">select</span> e.id 编号,e.name 姓名,e.gender 性别,e.salary 工资,d.name 部门名字 <span class="keyword">from</span> emp1 e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id= d.id <span class="keyword">where</span> e.name=<span class="string">'唐僧'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-内连接总结"><a href="#1-3-3-内连接总结" class="headerlink" title="1.3.3 内连接总结"></a>1.3.3 内连接总结</h4><ol>
<li>确定查询哪些表</li>
<li>确定表连接的条件  <strong>e.dept_id = d.id</strong></li>
<li>确定查询的条件   <strong>where e.name=’唐僧</strong>‘</li>
<li>确定查询的字段  ** ,e.name,e.gender,e.salary,d.name**</li>
</ol>
<h3 id="1-4-外连接"><a href="#1-4-外连接" class="headerlink" title="1.4 外连接"></a>1.4 外连接</h3><h4 id="1-4-1-左外连接"><a href="#1-4-1-左外连接" class="headerlink" title="1.4.1 左外连接"></a>1.4.1 左外连接</h4><blockquote>
<p>left  outer  join … on  ，outer可以省略</p>
<p>用左边表的记录去匹配右边表的记录，</p>
<p>如果符合条件的则显示；</p>
<p>否则，显示 NULL </p>
<p>可以理解为：<strong>在内连接的基础上保证左表的数据全部显示(左表是部门，右表员工)</strong></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 左表 <span class="keyword">left</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> 右表 <span class="keyword">on</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">--	在部门表中增加一个销售部</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (<span class="keyword">name</span>) <span class="keyword">values</span> (<span class="string">'销售部'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--	使用内连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept d <span class="keyword">inner</span> <span class="keyword">join</span> emp1 e <span class="keyword">on</span> d.id = e.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">--	使用左外连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept d <span class="keyword">left</span> <span class="keyword">join</span> emp1 e <span class="keyword">on</span> d.id = e.dept_id;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-右外连接"><a href="#1-4-2-右外连接" class="headerlink" title="1.4.2 右外连接"></a>1.4.2 右外连接</h4><blockquote>
<p>right  outer join … on ,outer 可以省略</p>
<p>用右边表的记录去匹配左边表的记录，</p>
<p>如果符合条件的则显示；</p>
<p>否则，显示 NULL 可以理解为：<strong>在内连接的基础上保证右表的数据全部显示</strong></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在员工表中增加一个员工</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp1 <span class="keyword">values</span> (<span class="literal">null</span>,<span class="string">'沙僧'</span>,<span class="string">'男'</span>,<span class="number">6666</span>,<span class="string">'2013-12-05'</span>,<span class="literal">null</span>); <span class="keyword">select</span> * <span class="keyword">from</span> emp1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用内连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">inner</span> <span class="keyword">join</span> emp1 <span class="keyword">on</span> dept.id = emp1.<span class="string">`dept_id`</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用右外连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">right</span> <span class="keyword">join</span> emp1 <span class="keyword">on</span> dept.id = emp.dept_id;</span><br></pre></td></tr></table></figure>

<h2 id="2-子查询"><a href="#2-子查询" class="headerlink" title="2. 子查询"></a>2. 子查询</h2><blockquote>
<p>子查询的概念：</p>
<ul>
<li>一个查询的结果做为另一个查询的条件</li>
<li>有查询的嵌套，内部的查询称为子查询</li>
<li>子查询要使用括号</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询开发部中有哪些员工</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp1 <span class="keyword">where</span> dept_id = (<span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> dept <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'市场部'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-1-子查询结果的三种情况"><a href="#2-1-子查询结果的三种情况" class="headerlink" title="2.1 子查询结果的三种情况"></a>2.1 子查询结果的三种情况</h3><h4 id="2-1-1-子查询的结果是单行单列"><a href="#2-1-1-子查询的结果是单行单列" class="headerlink" title="2.1.1 子查询的结果是单行单列"></a>2.1.1 子查询的结果是单行单列</h4><blockquote>
<p>子查询结果只要是单行单列，肯定在 WHERE 后面作为条件，</p>
<p>父查询使用：比较运算符，如：&gt; 、&lt;、&lt;&gt;、= 等</p>
<p>==select 查询字段 from 表 where 字段=(子查询);==</p>
</blockquote>
<h4 id="2-1-2-子查询的结果是多行单列"><a href="#2-1-2-子查询的结果是多行单列" class="headerlink" title="2.1.2 子查询的结果是多行单列"></a>2.1.2 子查询的结果是多行单列</h4><blockquote>
<p>子查询结果是单例多行，结果集类似于一个数组，父查询使用 IN 运算符</p>
<p>==select 查询字段  from  表  where  字段 in （子查询）;==</p>
</blockquote>
<h4 id="2-1-3-子查询的结果是多行多列"><a href="#2-1-3-子查询的结果是多行多列" class="headerlink" title="2.1.3 子查询的结果是多行多列"></a>2.1.3 子查询的结果是多行多列</h4><blockquote>
<p>子查询结果只要是多列，肯定在 from 后面作为表</p>
<p>==select  查询字段  from （子查询） 表别名  where  条件;==</p>
<p><strong>子查询作为表需要取别名</strong>，否则这张表没有名称则无法访问表中的字段</p>
</blockquote>
<h4 id="2-1-4-子查询总结"><a href="#2-1-4-子查询总结" class="headerlink" title="2.1.4 子查询总结"></a>2.1.4 子查询总结</h4><ul>
<li>子查询结果只要是<strong>单列</strong>，则在 where后面作为条件</li>
<li>子查询结果只要是<strong>多列</strong>，则在 from 后面作为表进行二次查询</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">DuanChaojie</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="http://www.itbuild.cn/2020/12/19/MySql%E5%9F%BA%E7%A1%80/06.MySQL%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%AD%90%E6%9F%A5%E8%AF%A2/">http://www.itbuild.cn/2020/12/19/MySql%E5%9F%BA%E7%A1%80/06.MySQL%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%AD%90%E6%9F%A5%E8%AF%A2/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.itbuild.cn">it❤ld</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2020/12/19/MySql%E5%9F%BA%E7%A1%80/07.%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1/"><i class="fas fa-angle-left">&nbsp;</i><span>MySql基础/07.数据库事务</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2020/12/19/MySql%E5%9F%BA%E7%A1%80/05.MySQL%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F%E5%92%8C%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"><span>MySql基础/05.MySQL数据库-表的约束和表之间的关系</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2020 ～ 2021 By DuanChaojie</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>